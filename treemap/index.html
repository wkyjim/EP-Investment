<!DOCTYPE html>
<html dir="ltr">
	<head>
		<title>Treemaps</title>
		<script type="text/javascript">
        function setIframeSource() {
            var theLoc = document.getElementById('location');
	    var theDataType = document.getElementById('data_type');
	    var theDayRange = document.getElementById('day_range');
            var theIframe = document.getElementById('treemapIframe');
            var theUrl;

	    theUrl = "https://wkyjim.github.io/market_treemaps/treemap/" + theLoc.options[theLoc.selectedIndex].value + "/latest_" + theDayRange.options[theDayRange.selectedIndex].value + "_" + theDataType.options[theDataType.selectedIndex].value + "_treemap";
            document.getElementById("myUrl").innerHTML = theUrl;
	    theIframe.src = theUrl;
        }
    </script>
	</head>
	<body onload = "setIframeSource()">
		<p style="display:none;">
			<span id="myUrl"></span>
		</p>
		<h1 style="color:rgb(76,81,109);text-align:center;">Market Treemaps</h1>
		<h2 style="color:rgb(76,81,109);text-align:center;">Please choose market, data type and day range</h2>
		<form id="form1" method="post">
			<div style="text-align:center">
				<div style="display:inline-block;margin:8px">
					<h4 style="color:rgb(76,81,109);text-align:center;">
						<label for="location">Market</label>
					</h4>
					<div style="text-align:center">
						<select style="color:rgb(29, 41, 81);" id="location" name="location" onchange="setIframeSource()">
							<option value="US" >U.S.</option>
							<option value="HK" >Hong Kong</option>
							<option value="CN" >China</option>
						</select>
					</div>
				</div>
				<div style="display:inline-block;margin:8px">
					<h4 style="color:rgb(76,81,109);text-align:center">
						<label for="day_range">Day Range</label>
					</h4>
					<div style="text-align:center">
						<select style="color:rgb(29, 41, 81);" id="day_range" name="day_range" onchange="setIframeSource()">
							<option value="1D">1 day</option>
							<option value="5D">5 days</option>
							<option value="10D">10 days</option>
							<option value="20D">20 days</option>
						</select>
					</div>
				</div>
				<div style="display:inline-block;margin:8px">
					<h4 style="color:rgb(76,81,109);text-align:center">
						<label for="data_type">Data Type</label>
					</h4>
					<div style="text-align:center">
						<select style="color:rgb(29, 41, 81);" id="data_type" name="data_type" onchange="setIframeSource()">
							<option value="pct_change">Percentage change</option>
							<option value="amount">Amount</option>
							<option value="pct_x_amount">Percentage Change Amount Multiple</option>
							<option value="volume">Volume</option>
						</select>
					</div>
				</div>
			</div>
		</form>
		<div class="treemap_container" style="display:flex;justify-content:center;">
			<iframe id="treemapIframe" src=""
			frameborder="0" width="100%" height="1000"></iframe>
			<script>
    document.getElementById("treemapIframe").src =
				<span id="myUrl"></span>;

			</script>
		</div>
	</body>
</html>
